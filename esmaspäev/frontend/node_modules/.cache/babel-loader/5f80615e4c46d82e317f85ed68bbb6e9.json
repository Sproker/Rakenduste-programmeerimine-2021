{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Student\\\\Desktop\\\\lessons-main\\\\esmasp\\xE4ev\\\\frontend\\\\src\\\\pages\\\\EditItem.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditItem() {\n  _s();\n\n  const [item, setItem] = useState(null);\n  const nameInputRef = useRef();\n  const priceInputRef = useRef();\n  const categoryInputRef = useRef();\n  useEffect(() => {\n    const itemId = window.location.href.split(\"/edit-item/\")[1];\n    fetch('http://localhost:8080/view-item/' + itemId).then(res => {\n      return res.json();\n    }).then(data => {\n      setItem(data);\n    });\n  }, []);\n\n  if (!item) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Laeb...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 13\n    }, this);\n  }\n\n  function formSubmitHandler(e) {\n    e.preventDefault();\n    const nameValue = nameInputRef.current.value;\n    const priceValue = priceInputRef.current.value;\n    const categoryValue = categoryInputRef.current.value;\n    const itemSubmitted = {\n      id: item.id,\n      name: nameValue,\n      price: priceValue,\n      category: categoryValue\n    }; // TODO: api päring eraldi komponenti (päring ja vorm eraldi)\n\n    fetch('http://localhost:8080/edit-item', {\n      method: 'POST',\n      body: JSON.stringify(itemSubmitted),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.status === 200 ? window.location.href = 'http://localhost:3000/admin' : '');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Change item\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Item name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Name\",\n      required: true,\n      ref: nameInputRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 75\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Item price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 39\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"Price\",\n      required: true,\n      ref: priceInputRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 78\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Item category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 42\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Category\",\n      required: true,\n      ref: categoryInputRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 82\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 88\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Add new item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditItem, \"bO66rsZ2glV6b8L108HIE+8DAnc=\");\n\n_c = EditItem;\nexport default EditItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditItem\");","map":{"version":3,"sources":["C:/Users/Student/Desktop/lessons-main/esmaspäev/frontend/src/pages/EditItem.js"],"names":["useState","useEffect","useRef","EditItem","item","setItem","nameInputRef","priceInputRef","categoryInputRef","itemId","window","location","href","split","fetch","then","res","json","data","formSubmitHandler","e","preventDefault","nameValue","current","value","priceValue","categoryValue","itemSubmitted","id","name","price","category","method","body","JSON","stringify","headers","status"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\nfunction EditItem() {\r\n  const [item, setItem] = useState(null);\r\n  const nameInputRef = useRef();\r\n  const priceInputRef = useRef();\r\n  const categoryInputRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const itemId = window.location.href.split(\"/edit-item/\")[1];\r\n    fetch('http://localhost:8080/view-item/' + itemId).then(res => {\r\n      return res.json();\r\n    }).then(data => {\r\n      setItem(data);\r\n    })\r\n  }, [])\r\n\r\n  if (!item) {\r\n    return (<div>Laeb...</div>);\r\n  }\r\n\r\n  function formSubmitHandler(e) {\r\n    e.preventDefault();\r\n    const nameValue = nameInputRef.current.value;\r\n    const priceValue = priceInputRef.current.value;\r\n    const categoryValue = categoryInputRef.current.value;\r\n\r\n    const itemSubmitted = {\r\n      id: item.id,\r\n      name: nameValue,\r\n      price: priceValue,\r\n      category: categoryValue\r\n    }\r\n\r\n    // TODO: api päring eraldi komponenti (päring ja vorm eraldi)\r\n    fetch('http://localhost:8080/edit-item', {\r\n        method: 'POST',\r\n        body: JSON.stringify(itemSubmitted),\r\n        headers: {\r\n            'Content-Type':'application/json'\r\n        }\r\n    }).then(res => ( res.status === 200 ? window.location.href = 'http://localhost:3000/admin' : ''));\r\n  }\r\n\r\n  return(\r\n    <div className=\"main\">\r\n      <h1>Change item</h1>\r\n      <label><b>Item name</b></label><br />\r\n      <input type=\"text\" placeholder=\"Name\" required ref={nameInputRef} /><br />\r\n      <label><b>Item price</b></label><br />\r\n      <input type=\"number\" placeholder=\"Price\"required ref={priceInputRef} /><br />\r\n      <label><b>Item category</b></label><br />\r\n      <input type=\"text\"placeholder=\"Category\" required ref={categoryInputRef} /><br /><br />\r\n      <button><b>Add new item</b></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditItem;"]},"metadata":{},"sourceType":"module"}